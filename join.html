<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>加入抽奖</title>

  <!-- Firebase SDK（compat 版） -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>

<body>
  <input id="nameInput" placeholder="输入名字" />
  <button onclick="join()">加入抽奖</button>

  <script>
    // 1️⃣ Firebase 配置
    const firebaseConfig = {
  apiKey: "AIzaSyCVC9jN9jzr0nTgmdVZEPYjSB6oEQ6ap9s",
  authDomain: "unitylottery.firebaseapp.com",
  databaseURL: "https://unitylottery-default-rtdb.firebaseio.com",
  projectId: "unitylottery",
  storageBucket: "unitylottery.firebasestorage.app",
  messagingSenderId: "370201025153",
  appId: "1:370201025153:web:f56ae08816268921740b80"
};

    // 2️⃣ 初始化（一定要在 join 之前）
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // 3️⃣ 再声明 join
    function join() {
      const name = document.getElementById("nameInput").value.trim();
      if (!name) {
        alert("请输入名字");
        return;
      }

      db.ref("rooms/room_001/users").push({
        name: name,
        time: Date.now()
      });

      alert("加入成功");
    }
  </script>
</body>
</html>
